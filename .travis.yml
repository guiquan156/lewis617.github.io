language: node_js
node_js:
  - stable
branches:
  only:
  - source
before_install:
  - npm install -g hexo-cli
install:
  - npm install
script:
  - git submodule init
  - git submodule update
  - hexo generate
after_success:
  - git config --global user.name "lewis617"
  - git config --global user.email "897473127@qq.com"
  - sed -i'' "/^ *repo/s~github\.com~${GH_TOKEN}@github.com~" _config.yml
  - hexo deploy
env:
  global:
    - secure: CXnad4WzXRtkKqrieVu3ZtfQzd2JyodZnCqV6FwJWoTInvi+r+JFC4+f6bt9cV0kz63N2os7Ae7O+UzKxvmmh7XsNlWHlBpctBFNhwVGvdcwt0PQM0fYkJgnSdnbAgWklSBbQHsuItAa2imqrGo2jYPitj96BXX4r4vqeWVwZxnXUZ8rAi5CKes0BvsbAvToQwmFKNGF7HEinHbs7mTumiswpJz9JfoVbBeypa1U2e/+LuYJ+o7Qy5Cristp7u0bFIabBRIDhGzVAPA1p/Hm9wPIIosmfZyiAbgw11D9nD0v1P6Uw3q0zAqGauQYit0og6QMLvo+GfzmqYgmk7rxdfhczulmO5TtCPC7vclEmmFdgrKQtff+qK00cmU9NVyYrWMCeq5VqSe4fz2bAK5j2/pOLbGhw9Oz6u4c2hGo5ILf/wQ5OITP0bwJYsUV3oX4guqxFnMu8R6i0maLtb05621TqiECr36qf7SnQjUF2z1Z/+MNw43kfAa/ZURgHZPaYGK7shjYSzYR1Fj3Uizi1pP8l1EHwH3ag5oLbqMRohRbV9KVexArOIWlRWuWco9N+PCHE75ZIZINdfTgg1zKYjyVur35Usp7z107Ir96ZE1i4aUkVRvqveZPjn6leR61Fs7j9xbFB5UQry3cYVRbHJ5TdZZ0mIAykJJQmEbg3+0=
